<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>èŠæ°´æ¥¼ å±‹å†…ãƒãƒƒãƒ—</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet èª­ã¿è¾¼ã¿ -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Swiperï¼ˆç”»åƒã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ç”¨ï¼‰ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

  <style>
    body {
      margin: 0;
      font-family: "Hiragino Sans", "Noto Sans JP", sans-serif;
    }
    #map {
      height: 100vh;
      width: 100%;
    }

    /* ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å…¨ä½“ */
    .popup-content {
      max-width: 260px;
    }

    /* ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ */
    .swiper {
      width: 240px;
      height: 180px;
      margin-bottom: 6px;
    }
    .swiper-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
    }
    .swiper-slide img:hover {
      opacity: 0.85;
    }

    /* ã‚¯ãƒªãƒƒã‚¯èª¬æ˜æ–‡ */
    .img-hint {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
      text-align: center;
    }

    /* ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆæ‹¡å¤§è¡¨ç¤ºï¼‰ */
    #modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      justify-content: center;
      align-items: center;
    }
    #modal img {
      max-width: 90%;
      max-height: 90%;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
    }
  </style>
</head>

<body>
  <div id="map"></div>

  <!-- æ‹¡å¤§ç”»åƒãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="modal" onclick="this.style.display='none'">
    <img src="" alt="">
  </div>

  <script>
    // === åœ°å›³åˆæœŸåŒ– ===
    const map = L.map('map', {
      crs: L.CRS.Simple,
      minZoom: -1,
      maxZoom: 2
    });

    // === èƒŒæ™¯ç”»åƒï¼ˆå±‹å†…ãƒãƒƒãƒ—ï¼‰ ===
    const mapWidth = 2000;  // ç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«å¹…
    const mapHeight = 1500; // ç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«é«˜ã•
    const bounds = [[0, 0], [mapHeight, mapWidth]];
    L.imageOverlay('kikusui_map.png', bounds).addTo(map);
    map.fitBounds(bounds);

    // === å„éƒ¨å±‹ãƒ‡ãƒ¼ã‚¿ ===
    const rooms = [
      {
        name: "ç„é–¢",
        coords: [1150, 1010],
        desc: "ã‚ˆã†ã“ãèŠæ°´æ¥¼ã¸ã€‚ç„é–¢æ¨ªã«è²¼ã‚‰ã‚Œã¦ã„ã‚‹é€†ã•å‘ãã®æœ­ã«ã¯çŸ³å·äº”å³è¡›é–€ã®å‘½æ—¥ãŒæ›¸ã‹ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã¯æ³¥æ£’é™¤ã‘ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚",
        img: ["IMG_0377.jpeg"]
      },
      {
        name: "ä¸‹åºƒé–“",
        coords: [1050, 950],
        desc: "é¹¿ã®å½«åˆ»ã‚„æ­£é¢ã®å£ã«é£¾ã‚‰ã‚Œã¦ã„ã‚‹æ›¸é“ãŒç‰¹å¾´çš„ã§ã™ã€‚æ±å´ã®æ£šã«ã¯èŠæ°´æ¥¼ã§çµå©šå¼ã‚’æŒ™ã’ãŸæ–¹ã€…ãŒä½œã‚‹ã€Œçµã€ã¨ã„ã†å·»ç‰©ãŒé£¾ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚",
        img: ["IMG_0378.jpeg", "IMG_0379.jpeg", "IMG_0376.jpeg", "IMG_0380.jpeg"]
      },
      {
        name: "ã‚ªãƒªã‚¨ãƒ³ã‚¿ãƒ«ãƒ«ãƒ¼ãƒ ",
        coords: [850, 300],
        desc: "å®´ä¼šãƒ»æŠ«éœ²å®´ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ä¸­è¯é¢¨ã®ç…§æ˜ã‚„éŠ…é‘¼ã€ãƒ“ãƒªãƒ¤ãƒ¼ãƒ‰å°ãªã©æ§˜ã€…ãªæ–‡åŒ–ãŒæ··åˆã—ã¦ã„ã‚‹å†…è£…ãŒç‰¹å¾´çš„ã§ã™ã€‚",
        img: ["IMG_0382.jpeg"]
      },
      {
        name: "æ˜¥æ—¥ã®é–“",
        coords: [700, 1575],
        desc: "ã“ã®éƒ¨å±‹ã®ä¸­å¤®éƒ¨è¥¿å´ã®å£ã«ã‚ã‚‹æŸ±ã¯æ˜æ²»ç¶­æ–°å¾Œã®å»ƒä»æ¯€é‡ˆé‹å‹•ã®æ™‚ã«å¯ºã‹ã‚‰å¼•ãå–ã£ãŸã‚‚ã®ã§ã™ã€‚",
        img: ["IMG_0381.jpeg"]
      }
    ];

    // === ãƒ”ãƒ³è¨­ç½® ===
    rooms.forEach((room, i) => {
      const popupContent = `
        <div class="popup-content">
          <h3>${room.name}</h3>
          <div class="swiper swiper${i}">
            <div class="swiper-wrapper">
              ${room.img.map(src => `
                <div class="swiper-slide">
                  <img src="${src}" alt="${room.name}" onclick="openModal('${src}')">
                </div>`).join("")}
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
          </div>
          <div class="img-hint">ğŸ“· ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§è¡¨ç¤ºã•ã‚Œã¾ã™</div>
          <p>${room.desc}</p>
        </div>
      `;

      const marker = L.marker(room.coords).addTo(map).bindPopup(popupContent);

      // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒé–‹ã„ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§Swiperã‚’åˆæœŸåŒ–
      marker.on('popupopen', () => {
        new Swiper(`.swiper${i}`, {
          pagination: { el: '.swiper-pagination', clickable: true },
          navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
        });
      });
    });

    // === ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãé–¢æ•° ===
    function openModal(src) {
      const modal = document.getElementById('modal');
      modal.style.display = 'flex';
      modal.querySelector('img').src = src;
    }
  </script>
</body>
</html>
